import React, { useState } from 'react';
import { 
  Code, Database, FileSpreadsheet, Server, 
  Cpu, Layers, Zap, Briefcase, GraduationCap, 
  Mail, Phone, MapPin, ExternalLink, Globe,
  Menu, X, Brain, LayoutTemplate, FileText, Printer, Download,
  Target, Rocket, CheckCircle
} from 'lucide-react';

const Portfolio = () => {
  const [lang, setLang] = useState('vi'); // 'vi' or 'en'
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  // Content Data Dictionary
  const content = {
    vi: {
      nav: { about: "Về tôi", skills: "Kỹ năng", projects: "Dự án", experience: "Kinh nghiệm", contact: "Liên hệ" },
      hero: {
        badge: "AI Software Engineer • 1 Năm Kinh Nghiệm",
        title_prefix: "Phát triển các hệ thống",
        title_highlight: "AI & Phần mềm",
        title_suffix: "mang lại giá trị thực tiễn.",
        desc: "Tôi là Thành An, một AI Software Engineer với 1 năm kinh nghiệm thực chiến. Khác với việc chỉ xây dựng mô hình, tôi tập trung vào việc tích hợp AI vào kiến trúc phần mềm (Software Architecture) để tạo ra các sản phẩm hoạt động ổn định, tự động hóa quy trình và giải quyết bài toán nghiệp vụ phức tạp.",
        btn_case: "Xem Case Study Hệ thống",
        btn_contact: "Liên hệ làm việc"
      },
      skills: {
        title: "Kỹ Năng & Công Nghệ",
        desc: "Sự kết hợp giữa tư duy Kỹ thuật phần mềm (Software Engineering) và Trí tuệ nhân tạo (AI).",
        cat1: "Software Engineering & Data",
        cat2: "AI Engineering & LLMs",
        cat3: "Infrastructure & Tools"
      },
      featured: {
        badge: "Dự án Tiêu biểu (System Architect)",
        why: "Điểm nhấn Kỹ thuật",
        why_desc: "Dự án minh chứng năng lực thiết kế hệ thống (System Design) hoàn chỉnh: Từ xử lý dữ liệu hỗn loạn, điều phối Multi-Agent, đến tự động hóa đầu ra. Đây là tư duy của một Engineer thực thụ, không chỉ là Researcher.",
        role_label: "Vai trò:",
        tech_label: "Công nghệ:"
      },
      projects: { title: "Các Dự Án Đã Triển Khai" },
      experience: { title: "Hành Trình Sự Nghiệp" },
      education: { 
        title: "Học Vấn",
        school: "Đại học Sư phạm Kỹ thuật TP. HCM",
        degree: "Cử nhân Trí Tuệ Nhân Tạo",
        grade: "GPA: Khá",
        desc: "Nền tảng vững chắc về Toán học, Cấu trúc dữ liệu & Giải thuật và Hệ thống thông minh."
      },
      contact: { 
        title: "Tìm kiếm mảnh ghép AI Software Engineer?", 
        desc: "Với 1 năm kinh nghiệm và tư duy sản phẩm, tôi sẵn sàng tham gia và đóng góp ngay lập tức vào quy trình phát triển của công ty.",
        btn: "Gửi Email Liên hệ"
      }
    },
    en: {
      nav: { about: "About", skills: "Skills", projects: "Projects", experience: "Experience", contact: "Contact" },
      hero: {
        badge: "AI Software Engineer • 1 Year Experience",
        title_prefix: "Building robust",
        title_highlight: "AI Software Systems",
        title_suffix: "that deliver real value.",
        desc: "I am Thanh An, an AI Software Engineer with 1 year of practical experience. Beyond building models, I focus on integrating AI into robust Software Architectures to create stable products, automate workflows, and solve complex business challenges.",
        btn_case: "View System Case Study",
        btn_contact: "Contact Me"
      },
      skills: {
        title: "Skills & Technologies",
        desc: "A blend of Software Engineering mindset and Artificial Intelligence capabilities.",
        cat1: "Software Engineering & Data",
        cat2: "AI Engineering & LLMs",
        cat3: "Infrastructure & Tools"
      },
      featured: {
        badge: "Featured Project (System Architect)",
        why: "Engineering Highlights",
        why_desc: "This project demonstrates complete System Design capability: From handling chaotic data, orchestrating Multi-Agents, to output automation. This reflects the mindset of a true Engineer, not just a Researcher.",
        role_label: "Role:",
        tech_label: "Tech Stack:"
      },
      projects: { title: "Deployed Projects" },
      experience: { title: "Career Journey" },
      education: { 
        title: "Education",
        school: "HCMC University of Technology and Education",
        degree: "Bachelor of Artificial Intelligence",
        grade: "GPA: Good",
        desc: "Strong foundation in Mathematics, Data Structures & Algorithms, and Intelligent Systems."
      },
      contact: { 
        title: "Looking for an AI Software Engineer?", 
        desc: "With 1 year of experience and a product mindset, I am ready to join and contribute immediately to your development lifecycle.",
        btn: "Send Email Application"
      }
    }
  };

  const t = content[lang];

  // Resume Data - Language Independent Structure
  const personalInfo = {
    name: "CAO NGUYỄN THÀNH AN",
    title: { vi: "AI Software Engineer", en: "AI Software Engineer" },
    email: "caonguyenthanhan.aaa@gmail.com",
    phone: "0929 620 697",
    address: { vi: "Thủ Đức, TP. Hồ Chí Minh", en: "Thu Duc Dist, HCMC, Vietnam" },
    github: "https://github.com/caonguyenthanhan",
    linkedin: "linkedin.com/in/thanh-an-cao", // Placeholder
  };

  const skillsList = [
    {
      title: t.skills.cat1,
      icon: <FileSpreadsheet className="w-5 h-5" />,
      items: [
        "Data Engineering: ETL Pipelines, SQL, Data Warehousing",
        "Python Ecosystem: Pandas, NumPy, FastAPI/Flask",
        "Business Automation: Advanced Excel VBA, Office Scripts",
        "Software Design Patterns & Clean Code"
      ]
    },
    {
      title: t.skills.cat2,
      icon: <Brain className="w-5 h-5" />,
      items: [
        "LLM Orchestration: LangGraph, Multi-Agent Systems",
        "RAG Systems: Vector DB, Semantic Search, Hybrid Search",
        "Model Integration: OpenAI API, Llama, Hugging Face",
        "AI Optimization: Prompt Engineering, Fine-tuning"
      ]
    },
    {
      title: t.skills.cat3,
      icon: <Code className="w-5 h-5" />,
      items: [
        "Version Control: Git, GitHub Flow",
        "Cloud Services: AWS (EC2, S3, Lambda basics)",
        "Containerization: Docker basics",
        "System Monitoring & Logging"
      ]
    }
  ];

  const featuredProject = {
    title: { vi: "Hệ thống Báo cáo Tự động Multi-Agent", en: "Multi-Agent Automated Reporting Engine" },
    role: { vi: "Core Developer & System Architect", en: "Core Developer & System Architect" },
    desc: { 
      vi: "Hệ thống phần mềm tự động hóa quy trình báo cáo phức tạp, chuyển đổi dữ liệu thô thành báo cáo chuẩn doanh nghiệp.",
      en: "A software system automating complex reporting workflows, transforming raw data into enterprise-standard reports."
    },
    tech: ["Python", "LangGraph", "NetworkX", "Excel Automation"],
    highlights: [
      { vi: "Kiến trúc: Thiết kế luồng xử lý Router → Analyst → Writer (Multi-Agent Pattern).", en: "Architecture: Designed Router → Analyst → Writer workflow (Multi-Agent Pattern)." },
      { vi: "Tối ưu hóa: Xử lý dữ liệu song song, cơ chế Caching giúp giảm 40% thời gian xử lý.", en: "Optimization: Parallel processing and Caching mechanism reduced processing time by 40%." },
      { vi: "Thực tiễn: Tự động căn chỉnh format Word/Excel theo chuẩn khắt khe của khách hàng.", en: "Practicality: Automated Word/Excel formatting to strict client standards." },
      { vi: "Kết quả: Loại bỏ hoàn toàn thao tác thủ công trong quy trình lập báo cáo.", en: "Result: Completely eliminated manual tasks in the reporting process." }
    ]
  };

  const projectsList = [
    {
      title: "Medical Consulting System",
      link: "https://github.com/caonguyenthanhan/Medical-Consulting-System",
      role: { vi: "Lead Developer", en: "Lead Developer" },
      desc: { 
        vi: "Hệ thống phần mềm tư vấn y tế tích hợp Llama & RAG. Xây dựng API và giao diện tương tác.",
        en: "Medical consulting software system integrating Llama & RAG. Built API and interactive UI."
      },
      tags: ["System Design", "RAG", "Fullstack"]
    },
    {
      title: "OCR Mobile Application",
      link: "https://github.com/caonguyenthanhan/OCR-Mobile-Application",
      role: { vi: "Application Engineer", en: "Application Engineer" },
      desc: { 
        vi: "Ứng dụng di động trích xuất và số hóa dữ liệu từ văn bản giấy, tích hợp xử lý ảnh.",
        en: "Mobile app for extracting and digitizing data from paper documents, integrating image processing."
      },
      tags: ["Mobile Dev", "Computer Vision"]
    }
  ];

  const experienceList = [
    {
      company: "CTY TNHH TƯ VẤN GIÁO DỤC NHÂN MỸ",
      role: { vi: "AI Engineer & Solutions Consultant", en: "AI Engineer & Solutions Consultant" },
      period: "01/2025 – 04/2025",
      details: [
        { vi: "Chủ trì thiết kế và triển khai các giải pháp phần mềm tích hợp AI vào quy trình đào tạo.", en: "Led the design and deployment of AI-integrated software solutions for training processes." },
        { vi: "Tối ưu hóa hiệu suất làm việc của hệ thống và nhân sự thông qua tự động hóa.", en: "Optimized system and personnel performance through automation." },
        { vi: "Xây dựng tài liệu kỹ thuật và đào tạo chuyển giao công nghệ cho đội ngũ nội bộ.", en: "Created technical documentation and conducted technology transfer training for the internal team." }
      ]
    },
    {
      company: "CÔNG TY PHẦN MỀM VÀNG",
      role: { vi: "Software Deployment & Data Engineer", en: "Software Deployment & Data Engineer" },
      period: "06/2024 – 07/2024",
      details: [
        { vi: "Phụ trách quản trị và chuẩn hóa cơ sở dữ liệu SQL quy mô lớn cho khách hàng doanh nghiệp.", en: "Responsible for managing and standardizing large-scale SQL databases for enterprise clients." },
        { vi: "Triển khai phần mềm, xử lý sự cố kỹ thuật (Troubleshooting) và đảm bảo tính toàn vẹn dữ liệu.", en: "Deployed software, performed troubleshooting, and ensured data integrity." }
      ]
    }
  ];

  const handlePrint = () => {
    window.print();
  };

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-800 print:bg-white print:text-black">
      
      {/* CONTROL BAR (Hidden on Print) */}
      <div className="fixed top-0 left-0 w-full bg-slate-900 text-white z-[100] px-6 py-3 flex justify-between items-center shadow-md print:hidden">
        <div className="font-bold text-lg flex items-center gap-2">
           <Target className="w-5 h-5 text-blue-400" />
           Career Portfolio
        </div>
        <div className="flex items-center gap-4">
          <button 
            onClick={() => setLang(lang === 'vi' ? 'en' : 'vi')}
            className="flex items-center gap-2 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-sm font-medium transition-colors"
          >
            <Globe className="w-4 h-4" />
            {lang === 'vi' ? 'English' : 'Tiếng Việt'}
          </button>
          <button 
            onClick={handlePrint}
            className="flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-sm font-bold transition-colors shadow-lg shadow-blue-900/50"
          >
            <Printer className="w-4 h-4" />
            Print / Save PDF
          </button>
        </div>
      </div>

      {/* Main Container - Adjusted for Print */}
      <div className="container mx-auto max-w-5xl bg-white shadow-2xl min-h-screen mt-20 mb-20 print:mt-0 print:mb-0 print:shadow-none print:w-full print:max-w-none">
        
        {/* HEADER */}
        <header className="bg-slate-900 text-white p-10 print:bg-white print:text-black print:p-0 print:pb-6 print:border-b-2 print:border-slate-800">
          <div className="flex flex-col md:flex-row justify-between items-start md:items-end gap-6">
            <div>
              <div className="hidden print:block text-xs uppercase tracking-widest text-slate-500 mb-1">Curriculum Vitae</div>
              <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight mb-2 uppercase print:text-4xl">
                {personalInfo.name}
              </h1>
              <h2 className="text-xl md:text-2xl text-blue-300 font-medium print:text-slate-700 print:font-bold">
                {personalInfo.title[lang]}
              </h2>
            </div>
            
            <div className="flex flex-col gap-2 text-sm text-slate-300 print:text-slate-600 print:text-right print:items-end">
               <div className="flex items-center gap-2 print:flex-row-reverse">
                 <Mail className="w-4 h-4" /> {personalInfo.email}
               </div>
               <div className="flex items-center gap-2 print:flex-row-reverse">
                 <Phone className="w-4 h-4" /> {personalInfo.phone}
               </div>
               <div className="flex items-center gap-2 print:flex-row-reverse">
                 <MapPin className="w-4 h-4" /> {personalInfo.address[lang]}
               </div>
               <div className="flex items-center gap-2 print:flex-row-reverse">
                 <ExternalLink className="w-4 h-4" /> {personalInfo.github}
               </div>
            </div>
          </div>

          {/* SUMMARY (Only visible in Print or if desired) */}
          <div className="mt-8 pt-8 border-t border-slate-700 print:border-slate-200 print:mt-4 print:pt-4">
             <p className="text-slate-300 leading-relaxed text-lg max-w-3xl print:text-slate-800 print:text-base print:leading-snug text-justify">
               {t.hero.desc}
             </p>
          </div>
        </header>

        <div className="p-10 grid grid-cols-1 lg:grid-cols-3 gap-10 print:p-0 print:grid-cols-3 print:gap-6 print:mt-6">
          
          {/* LEFT COLUMN (Skills, Education) */}
          <div className="lg:col-span-1 space-y-10 print:space-y-6">
            
            {/* SKILLS */}
            <section>
              <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <FileSpreadsheet className="w-5 h-5 text-blue-600" />
                {t.nav.skills}
              </h3>
              <div className="space-y-6">
                {skillsList.map((skill, idx) => (
                  <div key={idx}>
                    <h4 className="font-bold text-slate-800 text-sm mb-2">{skill.title}</h4>
                    <ul className="text-sm text-slate-600 space-y-1.5">
                      {skill.items.map((item, i) => (
                        <li key={i} className="flex items-start gap-2">
                          <span className="text-blue-500 mt-1">•</span>
                          {item}
                        </li>
                      ))}
                    </ul>
                  </div>
                ))}
              </div>
            </section>

            {/* EDUCATION */}
            <section>
              <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <GraduationCap className="w-5 h-5 text-blue-600" />
                {t.education.title}
              </h3>
              <div>
                <div className="font-bold text-slate-800">{t.education.school}</div>
                <div className="text-blue-700 font-medium">{t.education.degree}</div>
                <div className="text-sm text-slate-500 italic mb-2">{t.education.grade} | 2021 - 2025</div>
                <p className="text-sm text-slate-600">{t.education.desc}</p>
              </div>
            </section>

            {/* LANGUAGES (Optional addition for CV) */}
            <section>
               <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <Globe className="w-5 h-5 text-blue-600" />
                Languages
              </h3>
              <ul className="text-sm text-slate-600 space-y-1">
                <li className="flex justify-between"><span>Vietnamese</span> <span className="font-semibold">Native</span></li>
                <li className="flex justify-between"><span>English</span> <span className="font-semibold">Professional (TOEIC 550+)</span></li>
              </ul>
            </section>

          </div>

          {/* RIGHT COLUMN (Experience, Projects) */}
          <div className="lg:col-span-2 space-y-10 print:space-y-6">
            
            {/* FEATURED PROJECT (CASE STUDY) */}
            <section>
              <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <Rocket className="w-5 h-5 text-blue-600" />
                {t.featured.badge}
              </h3>
              
              <div className="bg-slate-50 p-6 rounded-lg border border-slate-200 print:bg-white print:p-0 print:border-none">
                <div className="flex justify-between items-start mb-2">
                  <h4 className="text-xl font-bold text-slate-900">{featuredProject.title[lang]}</h4>
                </div>
                <p className="text-blue-700 font-medium text-sm mb-3">{featuredProject.role[lang]}</p>
                
                <p className="text-slate-700 text-sm mb-4 italic border-l-4 border-blue-300 pl-3 py-1 bg-blue-50 print:bg-white">
                  "{t.featured.why_desc}"
                </p>

                <div className="space-y-2 mb-4">
                   {featuredProject.highlights.map((hl, idx) => (
                     <div key={idx} className="flex items-start gap-2 text-sm text-slate-700">
                        <CheckCircle className="w-4 h-4 text-slate-400 mt-0.5 shrink-0" />
                        <span>{hl[lang]}</span>
                     </div>
                   ))}
                </div>

                <div className="flex flex-wrap gap-2 print:hidden">
                  {featuredProject.tech.map((tech, idx) => (
                    <span key={idx} className="px-2 py-1 bg-slate-200 text-slate-700 text-xs font-semibold rounded">
                      {tech}
                    </span>
                  ))}
                </div>
                {/* Print only tech stack text */}
                <div className="hidden print:block text-xs text-slate-500 mt-2">
                  <span className="font-bold">Tech Stack:</span> {featuredProject.tech.join(', ')}
                </div>
              </div>
            </section>

            {/* WORK EXPERIENCE */}
            <section>
              <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <Briefcase className="w-5 h-5 text-blue-600" />
                {t.experience.title}
              </h3>
              
              <div className="space-y-6">
                {experienceList.map((exp, idx) => (
                  <div key={idx} className="relative pl-4 border-l-2 border-slate-200">
                    <div className="absolute -left-[5px] top-1.5 w-2.5 h-2.5 bg-blue-600 rounded-full"></div>
                    <div className="flex flex-col sm:flex-row sm:justify-between sm:items-baseline mb-1">
                      <h4 className="font-bold text-slate-900">{exp.company}</h4>
                      <span className="text-xs font-semibold text-slate-500 whitespace-nowrap">{exp.period}</span>
                    </div>
                    <div className="text-blue-700 text-sm font-medium mb-2">{exp.role[lang]}</div>
                    <ul className="list-disc list-outside ml-4 text-sm text-slate-600 space-y-1">
                      {exp.details.map((detail, dIdx) => (
                        <li key={dIdx}>{detail[lang]}</li>
                      ))}
                    </ul>
                  </div>
                ))}
              </div>
            </section>

            {/* OTHER PROJECTS */}
            <section>
              <h3 className="text-lg font-bold uppercase tracking-wider text-slate-900 border-b-2 border-blue-600 pb-2 mb-4 flex items-center gap-2">
                <Code className="w-5 h-5 text-blue-600" />
                {t.projects.title}
              </h3>
              
              <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                {projectsList.map((proj, idx) => (
                  <div key={idx} className="border border-slate-200 p-4 rounded bg-white hover:shadow-md transition-shadow print:shadow-none print:border-slate-300">
                    <h4 className="font-bold text-slate-900 text-sm mb-1">{proj.title}</h4>
                    <div className="text-xs text-blue-600 font-medium mb-2">{proj.role[lang]}</div>
                    <p className="text-xs text-slate-600 mb-2 min-h-[40px]">{proj.desc[lang]}</p>
                    <div className="flex gap-1 flex-wrap">
                      {proj.tags.map((tag, tIdx) => (
                        <span key={tIdx} className="text-[10px] px-1.5 py-0.5 bg-slate-100 text-slate-600 rounded border border-slate-200">
                          {tag}
                        </span>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            </section>

          </div>
        </div>
        
        {/* Footer for Screen View */}
        <footer className="bg-slate-50 text-slate-500 text-center py-6 text-sm border-t border-slate-100 print:hidden">
            <p>&copy; 2025 Cao Nguyễn Thành An. Professional Portfolio.</p>
        </footer>
      </div>
    </div>
  );
};

export default Portfolio;